###########
# trime_relics
# made by:
# tr33
#
###########
# i dont like the spinning, relic realted stuff? 
# active deage sounds good
# passive tho? what about a passive which declines with time? and then resets
@activation_cost = 3000
@triumph_duration = 3600
@triumph_duration_short = 1800
@triumph_duration_veryshort = 900
r_trime_houglass = {
	activation_duration = 0
	portrait = "GFX_trime_hourglass"
	sound = "relic_activation_miniature_galaxy"
	resources = {
		category = relics
		# Activation cost
		cost = {
			sr_zro = 200
		}
	}
	ai_weight = {
		weight = 20
	}
	can_be_stolen = no
	triggered_country_modifier = {
		potential = {
			always = yes
		}
		lithoid_pop_happiness = -0.02		# its made out of lithoids, head-canon
	}
	triggered_country_modifier = {
		potential = {
			always = yes
		}
		country_sr_zro_produces_mult = 0.1
	}
	score = 500
	active_effect = {
		# TODO: make these tooltips cleaner and check between immortal and non leader, 
		# only mortal leaders count for eavum, triggered description based on leaders present
		# custom_tooltip = trime_button2_title
		custom_tooltip = trime_button2_deage_all_tt		
		if = {
			limit = {
				any_owned_leader = {
					has_trait = trime_leader_trait_legendary_houtglasskeeper
				}
			}
			custom_tooltip = trime_button2_deage_all_tt_except_aevum
		}
		add_modifier = {
			modifier = trime_confused_leadership
			days = 360
		}
		custom_tooltip = relic_triumph_cooldown
		add_modifier = {
			modifier = "relic_activation_cooldown"
			days = @triumph_duration
		}
		hidden_effect = {
			every_owned_leader = {
				limit = {
					NOR = {
						has_trait = trime_leader_trait_legendary_timeskipper
					}
				}
				if = {
					limit = {
						is_immortal = yes
					}
					add_experience = 300
				}
				else = {
					add_age = -30
					if = {
						limit = {
							exists = event_target:trime_time_lord
						}
						event_target:trime_time_lord = {
							add_age = 10
							trime_setportrait = yes
						}
					}
				}
			}
		}
	}
	# Possible check for activation
	possible = {
		custom_tooltip = {
			fail_text = "requires_relic_no_cooldown"
			NOT = {
				has_modifier = relic_activation_cooldown
			}
		}
	}
}
