defined_text = {
	name = MemGetRarity
	random = no
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = this.mem_ancestors_grudge_smithing_quality_rolled
				value >= 6
			}
		}
		localization_key = mem_ancestors_grudge_legendary
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = this.mem_ancestors_grudge_smithing_quality_rolled
				value >= 5
			}
		}
		localization_key = mem_ancestors_grudge_masterful
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = this.mem_ancestors_grudge_smithing_quality_rolled
				value >= 4
			}
		}
		localization_key = mem_ancestors_grudge_exceptional
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = this.mem_ancestors_grudge_smithing_quality_rolled
				value >= 3
			}
		}
		localization_key = mem_ancestors_grudge_epic
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = this.mem_ancestors_grudge_smithing_quality_rolled
				value >= 2
			}
		}
		localization_key = mem_ancestors_grudge_rare
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = this.mem_ancestors_grudge_smithing_quality_rolled
				value >= 1
			}
		}
		localization_key = mem_ancestors_grudge_common
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = this.mem_ancestors_grudge_smithing_quality_rolled
				value <= 0
			}
		}
		localization_key = mem_ancestors_grudge_mundane
	}
	default = mem_ancestors_grudge_common
}

defined_text = {
	name = MemAncestorsHiveGetActive
	random = no
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = this.mem_ancestors_grudge_smithing_quality_rolled
				value >= 6
			}
			has_relic = r_mem_ancestors_grudge_pauldron
		}
		localization_key = mem_ancestors_grudge.45.exceptional_pauldron
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = this.mem_ancestors_grudge_smithing_quality_rolled
				value >= 6
			}
			has_relic = r_mem_ancestors_grudge_ring
		}
		localization_key = mem_ancestors_grudge.45.exceptional_ring_hive
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = this.mem_ancestors_grudge_smithing_quality_rolled
				value >= 6
			}
			has_relic = r_mem_ancestors_grudge_sword
		}
		localization_key = mem_ancestors_grudge.45.exceptional_sword
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = this.mem_ancestors_grudge_smithing_quality_rolled
				value < 6
			}
		}
		localization_key = mem_ancestors_grudge.46.tooltip
	}
	default = WEIRD
}

defined_text = {
	name = MemGetPurity
	random = no
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = this.mem_ancestors_grudge_smithing_purity_rolled
				value >= 1.5
			}
		}
		localization_key = mem_ancestors_grudge_purity5
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = this.mem_ancestors_grudge_smithing_purity_rolled
				value >= 1.25
			}
		}
		localization_key = mem_ancestors_grudge_purity4
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = this.mem_ancestors_grudge_smithing_purity_rolled
				value >= 1
			}
		}
		localization_key = mem_ancestors_grudge_purity3
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = this.mem_ancestors_grudge_smithing_purity_rolled
				value >= 0.75
			}
		}
		localization_key = mem_ancestors_grudge_purity2
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = this.mem_ancestors_grudge_smithing_purity_rolled
				value < 0.75
			}
		}
		localization_key = mem_ancestors_grudge_purity1
	}
	default = mem_ancestors_grudge_empty
}

# this refers to the scripted effect "mem_ancestors_grudge_roll_for_relic_rarity" where the inline script takes care of rolling
# for example:
# inline_script = {
# 	script = mem_ancestors_grudge/roll_rarity
# 	FLAG1 = 0
# 	FLAG2 = 0
# 	FLAG3 = 1
# 	FLAG4 = 1
# 	FLAG5 = 1
# }
# this means the min quality Flag1 is is 0 ( = mundane), the average Flag3 is  is 1 ( = common ), the maximun Flag5 is 1 (= common)
defined_text = {
	name = MemGetSituationRarity
	random = no
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = owner.value:mem_ancestors_grudge_situation_rarity_tooltip
				value > 6
			}
		}
		localization_key = mem_ancestors_grudge_legendary_situation
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = owner.value:mem_ancestors_grudge_situation_rarity_tooltip
				value > 5
			}
		}
		localization_key = mem_ancestors_grudge_masterful_situation
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = owner.value:mem_ancestors_grudge_situation_rarity_tooltip
				value > 4
			}
		}
		localization_key = mem_ancestors_grudge_exceptional_situation
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = owner.value:mem_ancestors_grudge_situation_rarity_tooltip
				value > 3
			}
		}
		localization_key = mem_ancestors_grudge_epic_situation
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = owner.value:mem_ancestors_grudge_situation_rarity_tooltip
				value > 2
			}
		}
		localization_key = mem_ancestors_grudge_rare_situation
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = owner.value:mem_ancestors_grudge_situation_rarity_tooltip
				value > 1
			}
		}
		localization_key = mem_ancestors_grudge_common_situation
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = owner.value:mem_ancestors_grudge_situation_rarity_tooltip
				value <= 1
			}
		}
		localization_key = mem_ancestors_grudge_mundane_situation
	}
	default = mem_ancestors_grudge_common_situation
}


# tbh i hvae no clue what the right numbers here are
# i only guessed them based on some calculations in my head and i really dont wanna do the proper math here
defined_text = {
	name = MemGetSituationPurity
	random = no
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = owner.value:mem_ancestors_grudge_situation_purity_tooltip
				value > 5
			}
		}
		localization_key = mem_ancestors_grudge_purity5
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = owner.value:mem_ancestors_grudge_situation_purity_tooltip
				value > 3
			}
		}
		localization_key = mem_ancestors_grudge_purity4
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = owner.value:mem_ancestors_grudge_situation_purity_tooltip
				value > 0
			}
		}
		localization_key = mem_ancestors_grudge_purity3
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = owner.value:mem_ancestors_grudge_situation_purity_tooltip
				value > -3
			}
		}
		localization_key = mem_ancestors_grudge_purity2
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = owner.value:mem_ancestors_grudge_situation_purity_tooltip
				value < -3
			}
		}
		localization_key = mem_ancestors_grudge_purity1
	}
	default = mem_ancestors_grudge_purity3
}

defined_text = {
	name = MemGetLeaderClass
	random = no
	text = {
		trigger = {
			has_relic = r_mem_ancestors_grudge_sword
		}
		localization_key = mem_ancestors_grudge_commander
	}
	text = {
		trigger = {
			has_relic = r_mem_ancestors_grudge_pauldron
		}
		localization_key = mem_ancestors_grudge_official
	}
	text = {
		trigger = {
			has_relic = r_mem_ancestors_grudge_ring
		}
		localization_key = mem_ancestors_grudge_scientist
	}
	default = mem_ancestors_grudge_empty
}

defined_text = {
	name = MemGetRelic
	random = no
	text = {
		trigger = {
			owner = {
				has_relic = r_mem_ancestors_grudge_sword
			}
		}
		localization_key = r_mem_ancestors_grudge_sword
	}
	text = {
		trigger = {
			owner = {
				has_relic = r_mem_ancestors_grudge_pauldron
			}
			#has_relic = r_mem_ancestors_grudge_pauldron
		}
		localization_key = r_mem_ancestors_grudge_pauldron
	}
	text = {
		trigger = {
			owner = {
				has_relic = r_mem_ancestors_grudge_ring
			}
			#has_relic = r_mem_ancestors_grudge_ring
		}
		localization_key = r_mem_ancestors_grudge_ring
	}
	default = mem_ancestors_grudge_empty
}

# Alternative text for Restoration Situation normal/hive
defined_text = {
	name = MemGetSitDesc
	random = no
	text = {
		trigger = {
			owner = {
				NOT = {
					has_origin = origin_mem_ancestors_grudge_hive
				}
			}
		}
		localization_key = situation_mem_ancestors_grudge_forge_repairs_desc_normal
	}
	text = {
		trigger = {
			owner = {
				has_origin = origin_mem_ancestors_grudge_hive
			}
		}
		localization_key = situation_mem_ancestors_grudge_forge_repairs_desc_hive
	}
}

# Alternative text between different smithing systems
defined_text = {
	name = MemGetSmithingSitDesc
	random = no
	text = {
		trigger = {
			owner = {
				has_country_flag = mem_malthus_test
			}
		}
		localization_key = situation_mem_ancestors_grudge_crafting_desc_test
	}
	text = {
		trigger = {
			owner = {
				NOT = {
					has_country_flag = mem_malthus_test
				}
			}
		}
		localization_key = situation_mem_ancestors_grudge_crafting_desc_normal
	}
}

# Alternative text on relic between different smithing systems
defined_text = {
	name = MemAncestorsGrudgeRelicRarity
	random = no
	text = {
		trigger = {
			owner = {
				has_country_flag = mem_malthus_test
			}
		}
		localization_key = mem_ancestors_grudge_get_relic_rarity_test
	}
	text = {
		trigger = {
			owner = {
				NOT = {
					has_country_flag = mem_malthus_test
				}
			}
		}
		localization_key = mem_ancestors_grudge_get_relic_rarity_normal
	}
}

# Defining text for qualities and purities
# MemAncestorsGrudgeQualityMin
defined_text = {
	name = MemAncestorsGrudgeQualityMin
	random = no
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_smithing_quality_min
				value <= 1
			}
		}
		localization_key = mem_ancestors_grudge_quality_1
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_smithing_quality_min
				value = 2
			}
		}
		localization_key = mem_ancestors_grudge_quality_2
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_smithing_quality_min
				value = 3
			}
		}
		localization_key = mem_ancestors_grudge_quality_3
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_smithing_quality_min
				value = 4
			}
		}
		localization_key = mem_ancestors_grudge_quality_4
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_smithing_quality_min
				value = 5
			}
		}
		localization_key = mem_ancestors_grudge_quality_5
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_smithing_quality_min
				value = 6
			}
		}
		localization_key = mem_ancestors_grudge_quality_6
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_smithing_quality_min
				value >= 7
			}
		}
		localization_key = mem_ancestors_grudge_quality_7
	}
}
# MemAncestorsGrudgeQualityMax
defined_text = {
	name = MemAncestorsGrudgeQualityMax
	random = no
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_smithing_quality_max
				value <= 1
			}
		}
		localization_key = mem_ancestors_grudge_quality_1
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_smithing_quality_max
				value = 2
			}
		}
		localization_key = mem_ancestors_grudge_quality_2
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_smithing_quality_max
				value = 3
			}
		}
		localization_key = mem_ancestors_grudge_quality_3
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_smithing_quality_max
				value = 4
			}
		}
		localization_key = mem_ancestors_grudge_quality_4
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_smithing_quality_max
				value = 5
			}
		}
		localization_key = mem_ancestors_grudge_quality_5
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_smithing_quality_max
				value = 6
			}
		}
		localization_key = mem_ancestors_grudge_quality_6
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_smithing_quality_max
				value >= 7
			}
		}
		localization_key = mem_ancestors_grudge_quality_7
	}
}
# MemAncestorsGrudgeQualityFinal
defined_text = {
	name = MemAncestorsGrudgeQualityFinal
	random = no
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = mem_ancestors_grudge_smithing_quality_final
				value <= 1
			}
		}
		localization_key = mem_ancestors_grudge_quality_1
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = mem_ancestors_grudge_smithing_quality_final
				value = 2
			}
		}
		localization_key = mem_ancestors_grudge_quality_2
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = mem_ancestors_grudge_smithing_quality_final
				value = 3
			}
		}
		localization_key = mem_ancestors_grudge_quality_3
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = mem_ancestors_grudge_smithing_quality_final
				value = 4
			}
		}
		localization_key = mem_ancestors_grudge_quality_4
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = mem_ancestors_grudge_smithing_quality_final
				value = 5
			}
		}
		localization_key = mem_ancestors_grudge_quality_5
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = mem_ancestors_grudge_smithing_quality_final
				value = 6
			}
		}
		localization_key = mem_ancestors_grudge_quality_6
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = mem_ancestors_grudge_smithing_quality_final
				value >= 7
			}
		}
		localization_key = mem_ancestors_grudge_quality_7
	}
}
# MemAncestorsGrudgePurityMin
defined_text = {
	name = MemAncestorsGrudgePurityMin
	random = no
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_rune_purity_min
				value <= 1
			}
		}
		localization_key = mem_ancestors_grudge_purity_1
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_rune_purity_min
				value = 2
			}
		}
		localization_key = mem_ancestors_grudge_purity_2
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_rune_purity_min
				value = 3
			}
		}
		localization_key = mem_ancestors_grudge_purity_3
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_rune_purity_min
				value = 4
			}
		}
		localization_key = mem_ancestors_grudge_purity_4
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_rune_purity_min
				value >= 5
			}
		}
		localization_key = mem_ancestors_grudge_purity_5
	}
}
# MemAncestorsGrudgePurityMax
defined_text = {
	name = MemAncestorsGrudgePurityMax
	random = no
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_rune_purity_max
				value <= 1
			}
		}
		localization_key = mem_ancestors_grudge_purity1
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_rune_purity_max
				value = 2
			}
		}
		localization_key = mem_ancestors_grudge_purity_2
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_rune_purity_max
				value = 3
			}
		}
		localization_key = mem_ancestors_grudge_purity_3
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_rune_purity_max
				value = 4
			}
		}
		localization_key = mem_ancestors_grudge_purity_4
	}
	text = {
		trigger = {
			check_variable = {
				which = mem_ancestors_grudge_rune_purity_max
				value >= 5
			}
		}
		localization_key = mem_ancestors_grudge_purity_5
	}
}
# MemAncestorsGrudgePurityFinal
defined_text = {
	name = MemAncestorsGrudgePurityFinal
	random = no
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = owner.mem_ancestors_grudge_rune_purity_final
				value <= 1
			}
		}
		localization_key = mem_ancestors_grudge_purity_1
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = owner.mem_ancestors_grudge_rune_purity_final
				value = 2
			}
		}
		localization_key = mem_ancestors_grudge_purity_2
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = owner.mem_ancestors_grudge_rune_purity_final
				value = 3
			}
		}
		localization_key = mem_ancestors_grudge_purity_3
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = owner.mem_ancestors_grudge_rune_purity_final
				value = 4
			}
		}
		localization_key = mem_ancestors_grudge_purity_4
	}
	text = {
		trigger = {
			check_variable_arithmetic = {
				which = owner.mem_ancestors_grudge_rune_purity_final
				value >= 5
			}
		}
		localization_key = mem_ancestors_grudge_purity_5
	}
}

# Relic finished Message
# MemAncestorsGrudgeRelicResult
defined_text = {
	name = MemAncestorsGrudgeRelicResult
	random = no
	text = {
		trigger = {
			owner = {
				has_country_flag = mem_malthus_test
			}
		}
		localization_key = mem_ancestors_grudge.50.desc_result_test
	}
	text = {
		trigger = {
			owner = {
				NOT = {
					has_country_flag = mem_malthus_test					
				}
			}
		}
		localization_key = mem_ancestors_grudge.50.desc_result_normal
	}
}